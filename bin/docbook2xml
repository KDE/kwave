#!/bin/sh
#
# Converts old docbook-3.1 documentation to modern xml (docbook 4.1)
# documentation files.
#
# (C) 2001, Thomas Eschenbacher <Thomas.Eschenbacher@gmx.de>
#
# NOTE: this is only a quick hack !
#

set -x

iconv -f latin1 -t utf8 $1.docbook > $1.utf8.docbook
fixsgml $1.utf8.docbook
xmlizer $1.utf8.docbook | \
sed s°\ ID=°\ id=°g | \
sed s°\ LANG=\"..\"°\ lang=\"\\\&language\;\"°g | \
sed s°\ URL=°\ url=°g | \
sed s°\ LINKEND=°\ linkend=°g | \
sed s°\ MOREINFO=\"NONE\"°\ moreinfo=\"none\"°g | \
sed s°\ MOREINFO=°\ moreinfo=°g | \
sed s°\ FORMAT=\"LINESPECIFIC\"°\ format=\"linespecific\"°g | \
sed s°\ FORMAT=°\ format=°g | \
sed s°\ WIDTH=°\ width=°g | \
sed s°\ LINKEND=°\ linkend=°g | \
sed s°\\\&kapp\ °\\\&kapp\;\ °g | \
sed s°\>\>\>°---°g | sed s°\<\<\<°---°g | \
grep -v "\<\!\[\%addindex\;\ \[\ \\&kdedocindex\;\ \]\]\>" \
> $1.xml

checkXML $1.xml

