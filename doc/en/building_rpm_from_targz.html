<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>Building RPM packages from tar.gz archives</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.54"><LINK
REL="HOME"
TITLE="The Kwave Handbook"
HREF="index.html"><LINK
REL="UP"
TITLE="Installation"
HREF="installation.html"><LINK
REL="PREVIOUS"
TITLE="Manual Compilation and installation"
HREF="manual_compilation.html"><LINK
REL="NEXT"
TITLE="Building RPM packages from CVS"
HREF="building_rpm_from_cvs.html"><META
HTTP-EQUIV="Content-Style-Type"
CONTENT="text/css"><LINK
REL="stylesheet"
HREF="common/kde-common.css"
TYPE="text/css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=iso-8859-1"><META
HTTP-EQUIV="Content-Language"
CONTENT="en"><LINK
REL="stylesheet"
HREF="common/kde-localised.css"
TYPE="text/css"
TITLE="KDE-English"><LINK
REL="stylesheet"
HREF="common/kde-default.css"
TYPE="text/css"
TITLE="KDE-Default"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#aa0000"
STYLE="font-family: sans-serif;"
><A
HREF="http://www.kde.org/"
><IMG
SRC="common/logotp3.png"
BORDER="0"
ALT="The K Desktop Environment"
HEIGHT="62"
WIDTH="229"></A
><HR
WIDTH="100%"
SIZE="2"
ALIGN="CENTER"
NOSHADE="NOSHADE"><DIV
ALIGN="RIGHT"
CLASS="NAVBAR"
><P
><A
HREF="building_rpm_from_cvs.html"
>Next</A
> <A
HREF="manual_compilation.html"
>Prev</A
> <A
HREF="index.html"
>Table of Contents</A
></P
></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="BUILDING_RPM_FROM_TARGZ"
>2.4. Building RPM packages from tar.gz archives</A
></H1
><P
>	If you are runnig a system with RPM support, the preferred way to 
	install <SPAN
CLASS="APPLICATION"
>Kwave</SPAN
> on your system will be the creation of a nice RPM
	package. First you should get the current source of <SPAN
CLASS="APPLICATION"
>Kwave</SPAN
>, either
	as a tar.gz archive from the
	<A
HREF="introduction.html#FTP-SERVER"
><SPAN
CLASS="APPLICATION"
>Kwave</SPAN
> anonymous ftp server</A
> or
	check out an up-to-date copy via
	<A
HREF="introduction.html#CVS-REPOSITORY"
>anonymous CVS</A
> and read the
	<A
HREF="building_rpm_from_cvs.html"
>next</A
> chapter.
    </P
><P
>	If you have downloaded a tar-gz archives of libkwave and <SPAN
CLASS="APPLICATION"
>Kwave</SPAN
>, 
	create and install the RPMs just by doing the following steps:
	([arch] stands for the platform you have built the package 
	and might be something like "i386", "i586", "sparc" or whatever,
	XXX stands for the version number you have downloaded.)
    </P
><OL
TYPE="1"
><LI
><P
>	First build the libkwave package and install it:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="SCREEN"
> <TT
CLASS="PROMPT"
>% </TT
><TT
CLASS="USERINPUT"
><B
>rpm -ta libkwave-XXX.tar.gz</B
></TT
>
 <TT
CLASS="PROMPT"
>% </TT
><TT
CLASS="USERINPUT"
><B
>rpm -i /usr/src/redhat/libkwave-XXX.[arch].rpm</B
></TT
></PRE
></TD
></TR
></TABLE
>
	</P
></LI
><LI
><P
>	Then build the <SPAN
CLASS="APPLICATION"
>Kwave</SPAN
> package and install it too:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="SCREEN"
> <TT
CLASS="PROMPT"
>% </TT
><TT
CLASS="USERINPUT"
><B
>rpm -ta kwave-XXX.tar.gz</B
></TT
>
 <TT
CLASS="PROMPT"
>% </TT
><TT
CLASS="USERINPUT"
><B
>rpm -i /usr/src/redhat/kwave-XXX.[arch].rpm</B
></TT
></PRE
></TD
></TR
></TABLE
>
	</P
></LI
></OL
><DIV
CLASS="NOTE"
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="common/note.png"
HSPACE="5"
ALT="Note"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>	<I
CLASS="EMPHASIS"
>Note for SuSE users: </I
>
	you have to specify the directory
	"/usr/src/packages" instead of "/usr/src/redhat" !
    </P
></TD
></TR
></TABLE
></DIV
><P
>	If you haven't seen any errors, then that's it and you can skip the
	rest of this chapter. If rpm was unable to build the packages
	and says something like "spec file not found", then go on and
	read the rest of this section.
    </P
><DIV
CLASS="CAUTION"
><TABLE
CLASS="CAUTION"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="common/caution.png"
HSPACE="5"
ALT="Caution"></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>	The support for the "rpm -ta ..." might be broken on some
	versions of rpm. The rpm program shipped with SuSE-6.4 
	(rpm-3.0.4) didn't work on my system, a manual upgrade of the
	rpm binary to rpm-3.0.5-0.5 helped. It was enough to put the 
	new rpm binary somewhere in the path so that it can be found
	before the version in /usr/bin. A good place for this might
	be /usr/local/bin or in $HOME/bin.
    </P
></TD
></TR
></TABLE
></DIV
><P
><A
NAME="MANUAL_RPM_CREATION"
></A
>
	If you can't get "rpm -ta" working, here are the steps for
	making that manually (the hard way):
    </P
><OL
TYPE="1"
><LI
><P
>	    Go to your RPM "topdir". This normally is "/usr/src/redhat"
	    for the redhat distribution or "/usr/src/packages" if you
	    have the SuSE distribution.
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="SCREEN"
> <TT
CLASS="PROMPT"
>% </TT
><TT
CLASS="USERINPUT"
><B
>cd /usr/src/redhat</B
></TT
></PRE
></TD
></TR
></TABLE
>
	</P
></LI
><LI
><P
>	    Put the tar.gz archives into the SOURCES subdirectory (you
	    have to replace "somewhere" with the real directory where
	    the files are, of course).
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="SCREEN"
> <TT
CLASS="PROMPT"
>% </TT
><TT
CLASS="USERINPUT"
><B
>cp /somewhere/libkwave-XXX.tar.gz SOURCES</B
></TT
>
 <TT
CLASS="PROMPT"
>% </TT
><TT
CLASS="USERINPUT"
><B
>cp /somewhere/kwave-XXX.tar.gz SOURCES</B
></TT
></PRE
></TD
></TR
></TABLE
>
	</P
></LI
><LI
><P
>	    Extract the spec files from the archives and put them into
	    the SPEC subdirectory.
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="SCREEN"
> <TT
CLASS="PROMPT"
>% </TT
><TT
CLASS="USERINPUT"
><B
>tar -xOzf SOURCES/libkwave-XXX.tar.gz \*.spec &#62; SPECS/libkwave.spec</B
></TT
>
 <TT
CLASS="PROMPT"
>% </TT
><TT
CLASS="USERINPUT"
><B
>tar -xOzf SOURCES/kwave-XXX.tar.gz \*.spec &#62; SPECS/kwave.spec</B
></TT
></PRE
></TD
></TR
></TABLE
>
	</P
></LI
><LI
><P
>	    Let rpm do the compile job and generate the rpm of libkwave.
	    If you only want to make a binary package, you
	    can specify "-bb" instead of "-ba", or just "-bs" to build
	    only a source package.
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="SCREEN"
> <TT
CLASS="PROMPT"
>% </TT
><TT
CLASS="USERINPUT"
><B
>rpm -ba SPECS/libkwave.spec</B
></TT
></PRE
></TD
></TR
></TABLE
>
	</P
></LI
><LI
><P
>	    If everything was ok, you can install the binary rpm of
	    libkwave, it will be in the BUILD directory.
	    If you already have a version of libkwave installed,
	    please remove it first or use the parameter "-U" instead
	    of "-i" for upgrading instead of installing.
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="SCREEN"
> <TT
CLASS="PROMPT"
>% </TT
><TT
CLASS="USERINPUT"
><B
>rpm -i BUILD/[arch]/libkwave-XXX.[arch].rpm</B
></TT
></PRE
></TD
></TR
></TABLE
>
	</P
></LI
><LI
><P
>	    If libkwave is installed, then you can go on and build and
	    install the <SPAN
CLASS="APPLICATION"
>Kwave</SPAN
> package itself. It goes the same way
	    the creation and installation of libkwave did.
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="SCREEN"
> <TT
CLASS="PROMPT"
>% </TT
><TT
CLASS="USERINPUT"
><B
>rpm -ba SPECS/[arch&#62;/kwave-XXX.spec</B
></TT
>
 <TT
CLASS="PROMPT"
>% </TT
><TT
CLASS="USERINPUT"
><B
>rpm -i BUILD/[arch]]/kwave-XXX.[arch].rpm</B
></TT
></PRE
></TD
></TR
></TABLE
>
	</P
></LI
></OL
></DIV
><DIV
ALIGN="RIGHT"
CLASS="NAVBAR"
><P
><A
HREF="building_rpm_from_cvs.html"
>Next</A
> <A
HREF="manual_compilation.html"
>Prev</A
> <A
HREF="index.html"
>Table of Contents</A
></P
></DIV
><HR
WIDTH="100%"
SIZE="2"
ALIGN="CENTER"
NOSHADE="NOSHADE"></BODY
></HTML
>